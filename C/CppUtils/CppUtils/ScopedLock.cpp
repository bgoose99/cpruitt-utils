
// local includes
#include "ScopedLock.h"

/******************************************************************************
 * 
 *****************************************************************************/
ScopedLock::ScopedLock( Mutex &mutex, bool lockMutex ) :
   mutex( mutex )
{
   locked = false;
   if( lockMutex )
      lock();
}

/******************************************************************************
 * 
 *****************************************************************************/
ScopedLock::~ScopedLock()
{
   unlock();
}

/******************************************************************************
 * 
 *****************************************************************************/
void ScopedLock::lock()
{
   if( !locked )
   {
      mutex.lock();
      locked = true;
   }
}

/******************************************************************************
 * 
 *****************************************************************************/
void ScopedLock::unlock()
{
   if( locked )
   {
      mutex.unlock();
      locked = false;
   }
}

